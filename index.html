<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stone Paper Scissor </title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    
    <h1>Stone, Paper, Scissor</h1>
    
    <button class="choice-button"  onclick="
    
    let resultmsg = resultChoice('Stone', processFunx());
    showResult('Stone', computerChoice, resultmsg);
     "><img src="stone-isolated-on-white-background-photo.jpg" alt="Stone_image" class="choice-image" id="stone"></button>
    <button class="choice-button" onclick="
    
    
    resultmsg = resultChoice('Paper', processFunx());
    showResult('Paper', computerChoice, resultmsg);
    "><img src="coloured-paper-a4.jpg" alt="paper_image" class="choice-image"></button>
    <button class="choice-button" onclick="
    
    
    resultmsg = resultChoice('Scissor', processFunx());
    showResult('Scissor', computerChoice, resultmsg);
    "><img src="1hh.jpg" alt="scissor_image" class="choice-image"></button>

    

    <h3 id="user-move"></h3>
  <h3 id="computer-move"></h3>
  <h3 id="result"></h3>
  <h3 id="score"></h3>

  <button onclick="localStorage.clear()
    createScoreObject();
    location.reload();
    
        ">Reset</button>

  <script>
        let computerChoice;
        function createScoreObject(data) {
            return {
                win: data?.win || 0,
                lost: data?.lost || 0,
                tie: data?.tie || 0,
                displayScore: function () {
                return `Matches Won: ${this.win}, Lost: ${this.lost}, Tie: ${this.tie}`;
                }
            };
        }

            let scoreStr = localStorage.getItem('score');
            let rawScore = scoreStr ? JSON.parse(scoreStr) : null;
            let score = createScoreObject(rawScore);

                    console.log(scoreStr);


        // score.displayScore = function(){
        //     return `Matches Won: ${score.win}, Lost: ${score.lost}, Tie: ${score.tie}`;
        // }
        

        
        // resetScore(scoreStr);
        // function resetScore(scoreStr){
        //     score = scoreStr ? JSON.parse(scoreStr) : {
                
        //         win : 0,
        //         lost: 0,
        //         tie: 0,
            
        
        //     };
            
        

        // showResult();
        // }
        
        
        
        function processFunx(){
           
            
                let randomNumber = Math.floor(Math.random()*3);
                if(randomNumber === 0){
                    computerChoice = 'Stone';
                } else if(randomNumber === 1){
                    computerChoice = 'Paper';
                }else if(randomNumber === 2 ){
                    computerChoice = 'Scissor';
                }
                return computerChoice;


            }
        function resultChoice(userMove, computerChoice){
                if(userMove === 'Stone'){
                    if(computerChoice === 'Stone'){
                    score.tie++;
                    return 'Its a tie !!';
                    } else if(computerChoice === 'Paper'){
                    score.lost++;
                    return 'Computer won !!';
                    } else if(computerChoice === 'Scissor'){
                    score.win++;
                    return 'Wohu, You won !!';
                    }
                } else if(userMove ==='Paper'){
                    if(computerChoice === 'Paper'){
                        score.tie++;
                        return 'Its a tie !!';
                        
                    } else if(computerChoice === 'Scissor'){
                        score.lost++;
                        return 'Computer won !!';
                        
                    } else if(computerChoice === 'Stone'){
                        score.win++;
                        return 'Wohu, You won !!';
                    }
                } else if(userMove === 'Scissor'){
                    if(computerChoice === 'Scissor'){
                        score.tie++;
                        return 'Its a tie !!';
                    } else if(computerChoice === 'Stone'){
                        score.lost++;
                        return 'Computer won !!';
                    } else if(computerChoice === 'Paper'){
                        score.win++;
                        return 'Wohu, You won !!';
                    }
                }
                

            }
      
    
        function showResult(userMove, computerChoice, result){
            localStorage.setItem('score', JSON.stringify(score));
            document.querySelector('#user-move').innerText = 
            userMove !== undefined ? `You have chosen ${userMove}`:'';
            document.querySelector('#computer-move').innerText = 
            computerChoice !== undefined ? `Computer choice is ${computerChoice}`:'';
            
            document.querySelector('#result').innerText = result ||'';
            
            document.querySelector('#score').innerText = score.displayScore();

        }
    </script>

    
</body>
</html>